{"version":3,"file":"static/webpack/static/development/pages/index.js.df4a94a4118e4129bea7.hot-update.js","sources":["webpack:///./pages/index.js"],"sourcesContent":["import React from \"react\";\nimport fetch from \"isomorphic-unfetch\";\nimport \"../styles/reset.scss\";\nimport \"../styles/global.scss\";\nimport style from \"../styles/layout.scss\";\n\nimport Head from \"../components/head\";\nimport Nav from \"../components/nav\";\nimport Schedule from \"../components/schedule\";\nimport Loading from \"../components/loading\";\nimport Data from \"../data\";\n\nclass Index extends React.Component {\n  constructor(props) {\n    super(props);\n    this.handleBoxIdChange = this.handleBoxIdChange.bind(this);\n    this.state = {\n      loading: true,\n      // data: {},\n      // boxId: null,\n      // currentCity: null,\n    };\n  }\n\n  handleBoxIdChange(boxId) {\n    this.setState({ boxId });\n  }\n\n  componentDidMount() {\n    let boxId = localStorage.getItem(\"boxId\");\n    const currentCity = localStorage.getItem(\"currentCity\") || \"北京市\";\n    const { cityMap } = Data.data.main.boxArea;\n    const { boxList } = cityMap[currentCity][0];\n\n    if (boxList.every(item => item.boxId !== boxId)) {\n      boxId = boxList[0].boxId;\n    }\n\n    this.setState({\n      loading: false,\n      data: Data.data,\n      boxId,\n      currentCity,\n    });\n  }\n\n  async fetch(city) {\n    this.setState({ loading: true });\n    const result = await fetch(\n      `https://busi.supermonkey.com.cn/wxClass/getClassSelectList3?city=${encodeURI(\n        city\n      )}`\n    );\n    const json = await result.json();\n    console.log(json.data);\n    // return { data: json.data }\n  }\n\n  render() {\n    const { loading } = this.state;\n    if (loading) return <Loading />;\n\n    const { data, boxId, currentCity } = this.state;\n    return (\n      <div className={style.main}>\n        <Head\n          title=\"超级猩猩·课程表\"\n          description=\"超级猩猩健身在线课程表\"\n          url=\"https://super.kshift.me\"\n        />\n        <Nav\n          data={data}\n          boxId={boxId}\n          currentCity={currentCity}\n          onBoxIdChange={this.handleBoxIdChange}\n        />\n        <Schedule data={data} boxId={boxId} />\n      </div>\n    );\n  }\n}\n\nexport default Index;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AALA;AAHA;AASA;AACA;;;AACA;AACA;AAAA;AAAA;AACA;;;AAEA;AACA;AACA;AAFA;AAAA;AACA;AAKA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;;;;;;AAEA;;;;;;AACA;AAAA;AAAA;;AACA;AACA;;AADA;;AAKA;AACA;;AADA;AACA;AACA;;;;;;;;;;;;;;;;;AAGA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAFA;AAAA;AAAA;AAAA;AAKA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AACA;AACA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;;;;AAnEA;AACA;AAqEA;;;;A","sourceRoot":""}