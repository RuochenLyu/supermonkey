{"version":3,"file":"static/webpack/static/development/pages/index.js.27055c62b67b243aff77.hot-update.js","sources":["webpack:///./pages/index.js"],"sourcesContent":["import React from \"react\";\nimport fetch from \"isomorphic-unfetch\";\nimport \"../styles/reset.scss\";\nimport \"../styles/global.scss\";\nimport style from \"../styles/layout.scss\";\n\nimport Loading from \"../components/loading\";\nimport Head from \"../components/head\";\nimport CityPicker from \"../components/city-picker\";\nimport BoxList from \"../components/box-list\";\nimport Schedule from \"../components/schedule\";\nimport Data from \"../data\";\n\nclass Index extends React.Component {\n  constructor(props) {\n    super(props);\n    this.handleBoxIdChange = this.handleBoxIdChange.bind(this);\n    this.handleCurrentCityChange = this.handleCurrentCityChange.bind(this);\n    this.state = { loading: true };\n  }\n\n  handleBoxIdChange(boxId) {\n    this.setState({ boxId });\n    localStorage.setItem(\"supermonkey/boxId\", boxId);\n  }\n\n  handleCurrentCityChange(currentCity) {\n    // this.setState({ currentCity });\n    // localStorage.setItem(\"supermonkey/currentCity\", currentCity);\n  }\n\n  componentDidMount() {\n    this.fetch(\"成都市\");\n    // let boxId = localStorage.getItem(\"supermonkey/boxId\") * 1;\n    // const currentCity =\n    //   localStorage.getItem(\"supermonkey/currentCity\") || \"北京市\";\n    // const { cityMap } = Data.data.main.boxArea;\n    // const { boxList } = cityMap[currentCity][0];\n\n    // if (boxList.every(item => item.boxId !== boxId)) {\n    //   boxId = boxList[0].boxId;\n    // }\n\n    // this.setState({\n    //   loading: false,\n    //   data: Data.data,\n    //   boxId,\n    //   currentCity,\n    // });\n    // localStorage.setItem(\"supermonkey/boxId\", boxId);\n    // localStorage.setItem(\"supermonkey/currentCity\", currentCity);\n  }\n\n  async fetch(city) {\n    this.setState({ loading: true });\n    const result = await fetch(`/static/${city}.json`);\n    const json = await result.json();\n    console.log(json.data);\n    // return { data: json.data }\n  }\n\n  render() {\n    const { loading } = this.state;\n    if (loading) return <Loading />;\n\n    const { data, boxId, currentCity } = this.state;\n    const { cityList } = data.main.boxArea;\n\n    return (\n      <div className={style.main}>\n        <Head\n          title=\"超级猩猩·课程表\"\n          description=\"超级猩猩健身在线课程表\"\n          url=\"https://super.kshift.me\"\n        />\n        <nav>\n          <CityPicker\n            cityList={cityList}\n            currentCity={currentCity}\n            onCurrentCityChange={this.handleCurrentCityChange}\n          />\n          <BoxList\n            data={data}\n            boxId={boxId}\n            currentCity={currentCity}\n            onBoxIdChange={this.handleBoxIdChange}\n          />\n        </nav>\n        <Schedule data={data} boxId={boxId} />\n      </div>\n    );\n  }\n}\n\nexport default Index;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAJA;AAKA;AACA;;;AACA;AACA;AAAA;AAAA;AACA;AACA;;;AAEA;AAEA;AACA;;;AAEA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;AAEA;;;;;;AACA;AAAA;AAAA;;AACA;AACA;;AADA;;AACA;AACA;;AADA;AACA;AACA;;;;;;;;;;;;;;;;;AAGA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAFA;AAAA;AAAA;AAAA;AAAA;AAOA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AACA;AACA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;;;;AA9EA;AACA;AAgFA;;;;A","sourceRoot":""}