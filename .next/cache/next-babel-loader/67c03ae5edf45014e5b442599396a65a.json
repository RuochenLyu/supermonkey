{"ast":null,"code":"var _jsxFileName = \"/Users/ruochen/Documents/workspace/supermonkey/pages/index.js\";\nvar __jsx = React.createElement;\nimport React from \"react\";\nimport fetch from \"isomorphic-unfetch\";\nimport \"../styles/reset.scss\";\nimport \"../styles/global.scss\";\nimport style from \"../styles/layout.scss\";\nimport Head from \"../components/head\";\nimport Nav from \"../components/nav\";\nimport Schedule from \"../components/schedule\";\nimport Data from \"../data\";\n\nclass Index extends React.Component {\n  constructor(props) {\n    super(props);\n    this.handleBoxIdChange = this.handleBoxIdChange.bind(this);\n    this.state = {\n      loading: true // data: {},\n      // boxId: null,\n      // currentCity: null,\n\n    };\n  }\n\n  handleBoxIdChange(boxId) {\n    this.setState({\n      boxId\n    });\n  }\n\n  componentDidMount() {\n    let boxId = localStorage.getItem(\"boxId\");\n    const currentCity = localStorage.getItem(\"currentCity\") || \"北京市\";\n    const {\n      cityMap\n    } = Data.data.main.boxArea;\n    const {\n      boxList\n    } = cityMap[currentCity][0];\n\n    if (boxList.every(item => item.boxId !== boxId)) {\n      boxId = boxList[0].boxId;\n    } // this.setState({\n    //   loading: false,\n    //   data: Data.data,\n    //   boxId,\n    //   currentCity,\n    // });\n\n  }\n\n  async fetch(city) {\n    this.setState({\n      loading: true\n    });\n    const result = await fetch(`https://busi.supermonkey.com.cn/wxClass/getClassSelectList3?city=${encodeURI(city)}`);\n    const json = await result.json();\n    console.log(json.data); // return { data: json.data }\n  }\n\n  render() {\n    // const { data } = this.props;\n    const {\n      loading\n    } = this.state;\n    if (loading) return __jsx(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    });\n    const {\n      data,\n      boxId,\n      currentCity\n    } = this.state;\n    return __jsx(\"div\", {\n      className: style.main,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, __jsx(Head, {\n      title: \"\\u8D85\\u7EA7\\u7329\\u7329\\xB7\\u8BFE\\u7A0B\\u8868\",\n      description: \"\\u8D85\\u7EA7\\u7329\\u7329\\u5065\\u8EAB\\u5728\\u7EBF\\u8BFE\\u7A0B\\u8868\",\n      url: \"https://super.kshift.me\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }), __jsx(Nav, {\n      data: data,\n      boxId: boxId,\n      currentCity: currentCity,\n      onBoxIdChange: this.handleBoxIdChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }), __jsx(Schedule, {\n      data: data,\n      boxId: boxId,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default Index;","map":{"version":3,"sources":["/Users/ruochen/Documents/workspace/supermonkey/pages/index.js"],"names":["React","fetch","style","Head","Nav","Schedule","Data","Index","Component","constructor","props","handleBoxIdChange","bind","state","loading","boxId","setState","componentDidMount","localStorage","getItem","currentCity","cityMap","data","main","boxArea","boxList","every","item","city","result","encodeURI","json","console","log","render"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,oBAAlB;AACA,OAAO,sBAAP;AACA,OAAO,uBAAP;AACA,OAAOC,KAAP,MAAkB,uBAAlB;AAEA,OAAOC,IAAP,MAAiB,oBAAjB;AACA,OAAOC,GAAP,MAAgB,mBAAhB;AACA,OAAOC,QAAP,MAAqB,wBAArB;AACA,OAAOC,IAAP,MAAiB,SAAjB;;AAEA,MAAMC,KAAN,SAAoBP,KAAK,CAACQ,SAA1B,CAAoC;AAClCC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;AACA,SAAKC,iBAAL,GAAyB,KAAKA,iBAAL,CAAuBC,IAAvB,CAA4B,IAA5B,CAAzB;AACA,SAAKC,KAAL,GAAa;AACXC,MAAAA,OAAO,EAAE,IADE,CAEX;AACA;AACA;;AAJW,KAAb;AAMD;;AAEDH,EAAAA,iBAAiB,CAACI,KAAD,EAAQ;AACvB,SAAKC,QAAL,CAAc;AAAED,MAAAA;AAAF,KAAd;AACD;;AAEDE,EAAAA,iBAAiB,GAAG;AAClB,QAAIF,KAAK,GAAGG,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAZ;AACA,UAAMC,WAAW,GAAGF,YAAY,CAACC,OAAb,CAAqB,aAArB,KAAuC,KAA3D;AACA,UAAM;AAAEE,MAAAA;AAAF,QAAcf,IAAI,CAACgB,IAAL,CAAUC,IAAV,CAAeC,OAAnC;AACA,UAAM;AAAEC,MAAAA;AAAF,QAAcJ,OAAO,CAACD,WAAD,CAAP,CAAqB,CAArB,CAApB;;AAEA,QAAIK,OAAO,CAACC,KAAR,CAAcC,IAAI,IAAIA,IAAI,CAACZ,KAAL,KAAeA,KAArC,CAAJ,EAAiD;AAC/CA,MAAAA,KAAK,GAAGU,OAAO,CAAC,CAAD,CAAP,CAAWV,KAAnB;AACD,KARiB,CAUlB;AACA;AACA;AACA;AACA;AACA;;AACD;;AAED,QAAMd,KAAN,CAAY2B,IAAZ,EAAkB;AAChB,SAAKZ,QAAL,CAAc;AAAEF,MAAAA,OAAO,EAAE;AAAX,KAAd;AACA,UAAMe,MAAM,GAAG,MAAM5B,KAAK,CACvB,oEAAmE6B,SAAS,CAC3EF,IAD2E,CAE3E,EAHsB,CAA1B;AAKA,UAAMG,IAAI,GAAG,MAAMF,MAAM,CAACE,IAAP,EAAnB;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAYF,IAAI,CAACT,IAAjB,EARgB,CAShB;AACD;;AAEDY,EAAAA,MAAM,GAAG;AACP;AACA,UAAM;AAAEpB,MAAAA;AAAF,QAAc,KAAKD,KAAzB;AACA,QAAIC,OAAJ,EAAa,OAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAP;AACb,UAAM;AAAEQ,MAAAA,IAAF;AAAQP,MAAAA,KAAR;AAAeK,MAAAA;AAAf,QAA+B,KAAKP,KAA1C;AAEA,WACE;AAAK,MAAA,SAAS,EAAEX,KAAK,CAACqB,IAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,MAAC,IAAD;AACE,MAAA,KAAK,EAAC,gDADR;AAEE,MAAA,WAAW,EAAC,oEAFd;AAGE,MAAA,GAAG,EAAC,yBAHN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAME,MAAC,GAAD;AACE,MAAA,IAAI,EAAED,IADR;AAEE,MAAA,KAAK,EAAEP,KAFT;AAGE,MAAA,WAAW,EAAEK,WAHf;AAIE,MAAA,aAAa,EAAE,KAAKT,iBAJtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MANF,EAYE,MAAC,QAAD;AAAU,MAAA,IAAI,EAAEW,IAAhB;AAAsB,MAAA,KAAK,EAAEP,KAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAZF,CADF;AAgBD;;AApEiC;;AAuEpC,eAAeR,KAAf","sourcesContent":["import React from \"react\";\nimport fetch from \"isomorphic-unfetch\";\nimport \"../styles/reset.scss\";\nimport \"../styles/global.scss\";\nimport style from \"../styles/layout.scss\";\n\nimport Head from \"../components/head\";\nimport Nav from \"../components/nav\";\nimport Schedule from \"../components/schedule\";\nimport Data from \"../data\";\n\nclass Index extends React.Component {\n  constructor(props) {\n    super(props);\n    this.handleBoxIdChange = this.handleBoxIdChange.bind(this);\n    this.state = {\n      loading: true,\n      // data: {},\n      // boxId: null,\n      // currentCity: null,\n    };\n  }\n\n  handleBoxIdChange(boxId) {\n    this.setState({ boxId });\n  }\n\n  componentDidMount() {\n    let boxId = localStorage.getItem(\"boxId\");\n    const currentCity = localStorage.getItem(\"currentCity\") || \"北京市\";\n    const { cityMap } = Data.data.main.boxArea;\n    const { boxList } = cityMap[currentCity][0];\n\n    if (boxList.every(item => item.boxId !== boxId)) {\n      boxId = boxList[0].boxId;\n    }\n\n    // this.setState({\n    //   loading: false,\n    //   data: Data.data,\n    //   boxId,\n    //   currentCity,\n    // });\n  }\n\n  async fetch(city) {\n    this.setState({ loading: true });\n    const result = await fetch(\n      `https://busi.supermonkey.com.cn/wxClass/getClassSelectList3?city=${encodeURI(\n        city\n      )}`\n    );\n    const json = await result.json();\n    console.log(json.data);\n    // return { data: json.data }\n  }\n\n  render() {\n    // const { data } = this.props;\n    const { loading } = this.state;\n    if (loading) return <div></div>;\n    const { data, boxId, currentCity } = this.state;\n\n    return (\n      <div className={style.main}>\n        <Head\n          title=\"超级猩猩·课程表\"\n          description=\"超级猩猩健身在线课程表\"\n          url=\"https://super.kshift.me\"\n        />\n        <Nav\n          data={data}\n          boxId={boxId}\n          currentCity={currentCity}\n          onBoxIdChange={this.handleBoxIdChange}\n        />\n        <Schedule data={data} boxId={boxId} />\n      </div>\n    );\n  }\n}\n\nexport default Index;\n"]},"metadata":{},"sourceType":"module"}